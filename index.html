<!doctype html>
<html ng-app="tnTour">
  <head>
    <meta charset="utf-8">
    <title>Турагенство</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" />
    <link href="application.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
  </head>
  <body ng-controller="TourController">
    <div class="container">
      <div class="row">
        <div class="col-md-2">
          <!--img src="images/logo.png" class="img-responsive" /-->
        </div>
        <div class="col-md-10">
          <h1>Турагенство</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-md-10"></div>
        <div class="col-md-2 text-right">
          <button class="btn btn-primary" ng-class="{disabled: !hiddenForm}" ng-click="showForm()">Добавить тур</button>
        </div>
      </div>
      <div class="row">
        <form ng-hide="hiddenForm">
          <div class="col-md-2">
            <h3>Добавление тура</h3>
          </div>
          <div class="col-md-10">
            <div class="form-group row">
              <div class="col-md-6">
                <label for="title">Название тура</label>
                <input type="text" id="title" class="form-control" ng-model="newTour.title" placeholder="Введите название" />
              </div>
            </div>
            <div class="form-group row">
              <div class="col-md-2">
                <label for="price">Цена</label>
                <input type="text" id="price" class="form-control" ng-model="newTour.price" placeholder="Введите цену"/>
              </div>
            </div>
            <div class="form-group">
                <label for="text">Описание</label>
                <textarea id="text" class="form-control" ng-model="newTour.text" placeholder="Введите описание"></textarea>
            </div>
            <div class="form-group text-right">
              <button class="btn btn-primary" ng-click="addTour(newTour)">Добавить</button>
              <button class="btn btn-primary" ng-click="hideForm()">Отменить</button>
            </div>
          </form>
        </div>
      </div>
      <div class="row item" ng-repeat="tour in tours track by $index">
        <div ng-show="!tour.editMode">
          <div class="row">
            <div class="col-md-2">
              <img src="images/beach.jpg" width="180"/>
            </div>
            <div class="col-md-10">
              <div class="row">
                <div class="col-md-10">
                  <h3>{{tour.title}}</h3>
                </div>
                <div class="col-md-2 price text-right">
                  <h3>{{tour.price}} руб.</h3>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">{{tour.text}}</div>
              </div>
            </div>
          </div>
          <div class="row text-right">
            <div class="col-md-8"></div>
            <div class="col-md-2"><a ng-click="editTour(tour)">Редактировать</a></div>
            <div class="col-md-2"><a ng-click="deleteTour(tour)">Удалить</a></div>
          </div>
        </div>
        <div ng-hide="!tour.editMode">
          <div class="row">
            <div class="col-md-2">
              <h3>Редактирование</h3>
            </div>
            <div class="col-md-10">
              <div class="row">
                <div class="col-md-10">
                  <input type="text" class="form-control input-large" ng-model="tour.draft.title" />
                </div>
                <div class="col-md-2 price text-right">
                  <input type="text" class="form-control input-large" ng-model="tour.draft.price" />
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <textarea id="text" class="form-control" ng-model="tour.draft.text"></textarea>
                </div>
              </div>
            </div>
            <div class="form-group text-right">
              <div class="col-md-8"></div>
              <div class="col-md-2">
                <button class="btn btn-primary" ng-click="saveTour(tour)">Сохранить</button>
              </div>
              <div class="col-md-2">
                <button class="btn btn-primary" ng-click="cancelEdit(tour)">Отменить</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="index.js"></script>
  </body>
</html>
